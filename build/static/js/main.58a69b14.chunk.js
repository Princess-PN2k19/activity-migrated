(this["webpackJsonpactivity-migrated"]=this["webpackJsonpactivity-migrated"]||[]).push([[0],{16:function(e,t,n){},45:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n(21),o=n.n(s),c=(n(45),n(9)),i=n(12),r=n.n(i),l=n(17),m=n(35),p=n(36),d=n(40),u=n(39),j=(n(16),n(14)),b=n(2),y=n(4),h=n.n(y),O=n(11),x=n(0);var g=function(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),c=Object(O.a)(o,2),i=c[0],r=c[1],l=Object(b.g)();return localStorage.getItem("username")?Object(x.jsx)(b.a,{to:{pathname:"/"}}):Object(x.jsx)("div",{className:"login",children:Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("h1",{children:"Login"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:"Username*:"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"username",type:"text",value:n,onChange:function(e){s(e.target.value)},placeholder:"Enter your username",required:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:"Password*:"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"password",type:"password",value:i,onChange:function(e){r(e.target.value)},placeholder:"Enter your password",required:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"loginBtn",onClick:function(){var e={username:n,password:i};""===n||""===i?alert("All fields are required!"):h.a.post("api/user/login",e).then((function(e){!1===e.data.error?(localStorage.setItem("username",e.data.user[0].username),l.push("/")):(console.log("Invalid credentials!"),s(""),r(""))})).catch((function(e){console.log(e,"ERROR"),alert("Invalid credentials!"),s(""),r("")}))},children:"Login"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})})};var f=function(e){var t=e.inputRegUname,n=e.inputRegPass,a=e.inputRegConfirmPass,s=e.register,o=e.regUname,c=e.regPass,i=e.regConfirmPass;return localStorage.getItem("username")?Object(x.jsx)(b.a,{to:{pathname:"/"}}):Object(x.jsx)("div",{className:"register",children:Object(x.jsxs)("div",{className:"regContainer",children:[Object(x.jsx)("h1",{children:"Register"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:"Username*:"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"username",type:"text",value:o,onChange:t,placeholder:"Enter your username",required:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:"Password*:"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"password",type:"password",value:c,onChange:n,placeholder:"Enter your password",required:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("label",{children:"Confirm Password*:"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("input",{name:"password",type:"password",value:i,onChange:a,placeholder:"Confirm your password",required:!0}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"regBtn",onClick:s,children:"Register"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{})]})})},N=n(15),C=n.n(N);C.a.setAppElement("#root");var E=function(e){var t=e.companies,n=e.editCompany,s=e.companyName,o=e.inputCompName,c=e.addInputCompany,i=e.deleteCompany,r=e.setIdEdit,l=e.idEdit,m=e.getAllCompanies,p=e.inputNewCompanyName,d=Object(a.useState)(!1),u=Object(O.a)(d,2),j=u[0],b=u[1],y=Object(a.useState)(""),g=Object(O.a)(y,2),f=g[0],N=g[1],E=function(){b(!j)};return Object(x.jsxs)("div",{className:"company",children:[Object(x.jsx)("input",{name:"companyName",value:s,type:"text",onChange:o,placeholder:"Enter a company",required:!0}),Object(x.jsx)("button",{type:"submit",disabled:!s,onClick:c,children:"Add"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Company Name"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:t.map((function(e,t){return e.id===l?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("input",{className:"editCompanyInput",value:n.company_name,onChange:function(e){return p(e,t)}})}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{className:"updateBtn",onClick:function(){return e=l,void(""===n.company_name?alert("New company name field cannot be empty!"):h.a.put("api/companies/"+e,{company_name:n.company_name}).then((function(e){console.log("SUCCESS",e),alert("Updated successfully!"),m(),r("","")})).catch((function(e){console.log("ERROR",e),alert("Error.")})));var e},children:"Save"}),Object(x.jsx)("button",{className:"cancelBtn",onClick:function(){r(" "," ")},children:"Cancel"})]})]},t):Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.company_name}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{className:"editBtn",onClick:function(){return r(e.id,e.company_name)},children:"Edit"}),Object(x.jsx)("button",{className:"deleteBtn",onClick:function(){var t;E(),t=e.id,N(t)},children:"Delete"}),Object(x.jsxs)(C.a,{isOpen:j,className:"mymodal",overlayClassName:"myoverlay",children:[Object(x.jsx)("div",{children:"Are you sure you want to remove this company?"}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"deleteBtn",onClick:function(){E(),i(f)},children:"Yes"}),Object(x.jsx)("button",{className:"cancelBtn",onClick:E,children:"Cancel"})]})]})]},t)}))})]})]})};C.a.setAppElement("#root");var v=function(e){var t=e.handleEdit,n=e.inputNewEmployeeName,s=e.inputNewPosition,o=e.inputNewEmployeeCompany,c=e.positions,i=e.company_Names,r=e.employees,l=e.companyName,m=e.employeeName,p=e.position,d=e.inputCompId,u=e.inputEmpName,j=e.inputEmpPosition,b=e.addInputEmployee,y=e.options,h=e.deleteEmployee,g=e.setIdEmpEdit,f=e.idEmpEdit,N=e.editEmployee,E=Object(a.useState)(!1),v=Object(O.a)(E,2),S=v[0],_=v[1],w=Object(a.useState)(""),P=Object(O.a)(w,2),I=P[0],A=P[1],k=function(){_(!S)};return Object(x.jsxs)("div",{className:"employee",children:[Object(x.jsx)("select",{value:l,onChange:d,children:i.map((function(e,t){return y(e,t)}))}),c.length&&Object(x.jsx)("select",{value:p,onChange:j,children:c.map((function(e,t){return y(e.role,t)}))}),Object(x.jsx)("input",{type:"text",value:m,name:"employeeName",onChange:u,placeholder:"Enter an employee name",required:!0}),Object(x.jsx)("button",{type:"submit",disabled:!l||!m||!p,onClick:b,children:"Add"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Company"}),Object(x.jsx)("th",{children:"Position"}),Object(x.jsx)("th",{children:"Employee Name"}),Object(x.jsx)("th",{children:"Actions"})]})}),Object(x.jsx)("tbody",{children:r.map((function(e,a){return e.id===f?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("select",{className:"editEmployeeCompany",value:N.company_name,onChange:function(e){return o(e)},children:i.map((function(e,t){return y(e,t)}))})}),Object(x.jsx)("td",{children:Object(x.jsx)("select",{className:"editEmployeePosition",value:N.employee_position,onChange:function(e){return s(e)},children:c.map((function(e,t){return y(e.role,t)}))})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{onChange:function(e){return n(e)},value:N.employee_name,type:"text",className:"editEmployeeName",placeholder:"New employee name"})}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:function(){return t(f)},type:"submit",className:"updateBtn",children:"Save"}),Object(x.jsx)("button",{onClick:function(){g("","","","")},type:"submit",className:"cancelBtn",children:"Cancel"})]})]},a):Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:e.company_name}),Object(x.jsx)("td",{children:e.employee_position}),Object(x.jsx)("td",{children:e.employee_name}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{className:"editBtn",onClick:function(){return g(e.id,e.company_name,e.employee_name,e.employee_position)},children:"Edit"}),Object(x.jsx)("button",{className:"deleteBtn",onClick:function(){var t;k(),t=e.id,A(t)},children:"Delete"})]}),Object(x.jsxs)(C.a,{isOpen:S,className:"mymodal",overlayClassName:"myoverlay",children:[Object(x.jsx)("div",{children:"Are you sure you want to remove this employee?"}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{className:"deleteBtn",onClick:function(){k(),h(I)},children:"Yes"}),Object(x.jsx)("button",{className:"cancelBtn",onClick:k,children:"Cancel"})]})]},a)}))})]})]})},S=n(38);var _=function(e){var t=e.children,n=Object(S.a)(e,["children"]),a=localStorage.getItem("username");return Object(x.jsx)(b.b,Object(c.a)(Object(c.a)({},n),{},{render:function(){return a?t:Object(x.jsx)(b.a,{to:{pathname:"login"}})}}))},w=n.p+"static/media/404.563a0798.jpg",P=function(e){Object(d.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={editCompany:{id:"",company_name:""},editEmployee:{company_name:"",id:"",employee_name:"",employee_position:""},login:!0,regUname:"",regPass:"",regConfirmPass:"",uname:"",pass:"",companyName:"",newCompanyName:"",newEmployeeCompany:"",newEmployeeName:"",newPosition:"",companyId:"",employeeName:"",position:"",id:"",employee_id:"",positions:[],companies:[],employees:[],company_Ids:[],company_Names:[],usernames:[],users:[],apiResponse:"",idEdit:"",idEmpEdit:"",idEmpDelete:""},e.getAllCompanies=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("api/companies");case 3:n=t.sent,e.setState({companies:n.data}),e.getAllCompanyNames(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.logout=function(){e.setState({login:!0}),localStorage.removeItem("username")},e.getAllCompanyNames=function(){var t=[];e.state.companies.forEach((function(e){t.push(e.company_name)})),e.setState({company_Names:t,companyName:e.state.companies[0].company_name})},e.options=function(e,t){return Object(x.jsx)("option",{children:e},"".concat(t,"-test"))},e.inputCompName=function(t){var n=t.target.value;e.setState({companyName:n})},e.inputRegUname=function(t){var n=t.target.value;e.setState({regUname:n})},e.inputRegPass=function(t){var n=t.target.value;e.setState({regPass:n})},e.inputRegConfirmPass=function(t){var n=t.target.value;e.setState({regConfirmPass:n})},e.inputCompId=function(t){var n=t.target.value;e.setState({companyName:n})},e.inputEmpName=function(t){var n=t.target.value;e.setState({employeeName:n})},e.inputEmpPosition=function(t){var n=t.target.value;e.setState({position:n})},e.inputNewCompanyName=function(t){var n=t.target.value;e.setState({editCompany:Object(c.a)(Object(c.a)({},e.state.editCompany),{},{company_name:n})})},e.inputNewEmployeeCompany=function(t){var n=t.target.value;e.setState({editEmployee:Object(c.a)(Object(c.a)({},e.state.editEmployee),{},{company_name:n})})},e.inputNewPosition=function(t){var n=t.target.value;e.setState({editEmployee:Object(c.a)(Object(c.a)({},e.state.editEmployee),{},{employee_position:n})})},e.inputNewEmployeeName=function(t,n){var a=t.target.value;e.setState({editEmployee:Object(c.a)(Object(c.a)({},e.state.editEmployee),{},{employee_name:a})})},e.handleEdit=function(t){""===e.state.editEmployee.company_name||""===e.state.editEmployee.employee_name||""===e.state.editEmployee.employee_position?alert("All fields are required!"):h.a.put("api/employees/"+t,{company_name:e.state.editEmployee.company_name,employee_name:e.state.editEmployee.employee_name,employee_position:e.state.editEmployee.employee_position}).then((function(t){console.log("SUCCESS",t),alert("Updated successfully!"),e.getAllEmployees(),e.setIdEmpEdit("","","","")})).catch((function(e){console.log("ERROR",e),alert("Error.")}))},e.register=function(){var t=e.state,n=t.regUname,a=t.regPass,s=t.regConfirmPass,o={username:n,password:a};""===n||""===a||""===s?alert("All fields are required!"):e.state.usernames.includes(n)?(alert("Username already exist!"),e.setState({regUname:"",regPass:"",regConfirmPass:""})):a!==s?(alert("Passwords did not match!"),e.setState({regPass:"",regConfirmPass:""})):h.a.post("api/user/register",o).then((function(t){alert("Sucessfully registered."),localStorage.setItem("username",n),e.setState({regUname:"",regPass:"",regConfirmPass:""})})).catch((function(t){console.log("acc",o),alert("Registration failed."),e.setState({regUname:"",regPass:"",regConfirmPass:""})}))},e.getAllPositions=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("api/positions");case 3:n=t.sent,console.log("FFFFFFFFFFFFFD",n.data),e.setState({positions:n.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.getAllEmployees=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("api/employees");case 3:n=t.sent,e.setState({employees:n.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getAllUsernames=Object(l.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("api/users");case 3:n=t.sent,e.setState({users:n.data}),a=[],e.state.users.forEach((function(e){a.push(e.username)})),e.setState({usernames:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])}))),e.addInputCompany=function(){e.state.companies.map((function(e){return e.company_name})).includes(e.state.companyName)?(alert("Company already exist!"),e.setState({companyName:""})):e.state.companyName?h.a.post("api/company",{company_name:e.state.companyName,status:"Active"}).then((function(t){console.log(t,"Company added successfully!"),e.getAllCompanies(),e.getAllCompanyNames(),e.setState({companyName:""})})).catch((function(t){console.log(t,"Failed."),e.setState({companyName:""})})):alert("Input field cannot be empty!")},e.addInputEmployee=function(){""===e.state.companyName||""===e.state.employeeName||""===e.state.position?alert("All fields are required!"):h.a.post("api/employee",{company_name:e.state.companyName,employee_name:e.state.employeeName,employee_position:e.state.position,status:"Active"}).then((function(t){console.log("Employee added successfully!",t),e.getAllEmployees(),e.setState({companyName:"",employeeName:"",position:""})})).catch((function(t){console.log(t,"Employee was not added."),e.setState({companyName:"",employeeName:"",position:""})}))},e.deleteCompany=function(t){h.a.delete("api/companies/"+t).then((function(n){console.log(n,"Deleted"),e.getAllCompanies();var a=e.state.company_Ids.filter((function(e){return e!==t}));e.setState({company_Ids:a})})).then((function(e){console.log(e)}))},e.deleteEmployee=function(t){h.a.delete("api/employees/"+t).then((function(t){console.log(t,"Deleted"),e.getAllEmployees()})).then((function(e){console.log(e)}))},e.setIdEdit=function(t,n){e.setState({idEdit:t,editCompany:{id:t,company_name:n}})},e.setIdEmpEdit=function(t,n,a,s){e.setState({idEmpEdit:t,editEmployee:{company_name:n,id:t,employee_name:a,employee_position:s}})},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.getAllCompanies(),this.getAllEmployees(),this.getAllUsernames(),this.getAllPositions()}},{key:"render",value:function(){return Object(x.jsx)(j.a,{children:Object(x.jsx)("div",{children:Object(x.jsxs)(b.d,{children:[Object(x.jsxs)(b.b,{exact:!0,path:"/login",children:[Object(x.jsx)(j.b,{to:"/register",children:Object(x.jsx)("button",{className:"routeBtn",children:"Register"})}),Object(x.jsx)(g,{})]}),Object(x.jsxs)(b.b,{exact:!0,path:"/register",children:[Object(x.jsx)(j.b,{to:"/login",children:Object(x.jsx)("button",{className:"routeBtn",children:"Login"})}),Object(x.jsx)(f,{regUname:this.state.regUname,regPass:this.state.regPass,regConfirmPass:this.state.regConfirmPass,inputRegUname:this.inputRegUname,inputRegPass:this.inputRegPass,inputRegConfirmPass:this.inputRegConfirmPass,register:this.register})]}),Object(x.jsxs)(_,{exact:!0,path:"/",children:[Object(x.jsxs)("div",{className:"activity",children:[Object(x.jsx)("button",{className:"signOutBtn",onClick:this.logout,children:"Sign Out"}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("h1",{className:"header",children:"Companies"}),Object(x.jsx)(E,{editCompany:this.state.editCompany,newCompanyName:this.state.newCompanyName,inputNewCompanyName:this.inputNewCompanyName,getAllCompanies:this.getAllCompanies,setIdEdit:this.setIdEdit,idEdit:this.state.idEdit,companies:this.state.companies,companyName:this.state.companyName,deleteCompany:this.deleteCompany,inputCompName:this.inputCompName,addInputCompany:this.addInputCompany})]}),Object(x.jsxs)("div",{className:"employees",children:[Object(x.jsx)("h1",{className:"header",children:"Employees"}),Object(x.jsx)(v,{editEmployee:this.state.editEmployee,handleEdit:this.handleEdit,inputNewEmployeeName:this.inputNewEmployeeName,inputNewPosition:this.inputNewPosition,inputNewEmployeeCompany:this.inputNewEmployeeCompany,positions:this.state.positions,setIdEmpEdit:this.setIdEmpEdit,idEmpEdit:this.state.idEmpEdit,company_Names:this.state.company_Names,company_Ids:this.state.company_Ids,employees:this.state.employees,companyName:this.state.companyName,employeeName:this.state.employeeName,position:this.state.position,deleteEmployee:this.deleteEmployee,inputCompId:this.inputCompId,inputEmpName:this.inputEmpName,inputEmpPosition:this.inputEmpPosition,addInputEmployee:this.addInputEmployee,options:this.options})]})]}),Object(x.jsx)(b.b,{path:"*",children:Object(x.jsx)("div",{children:Object(x.jsx)("img",{alt:"404 no found",src:w})})})]})})})}}]),n}(a.Component),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),o(e),c(e)}))};o.a.render(Object(x.jsx)(a.StrictMode,{children:Object(x.jsx)(P,{})}),document.getElementById("root")),I()}},[[83,1,2]]]);
//# sourceMappingURL=main.58a69b14.chunk.js.map